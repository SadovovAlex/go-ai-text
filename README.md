# AI SMS Service

Этот проект представляет собой веб-сервис, который использует внешний AI-сервис для генерации контента SMS-сообщений. Сервис написан на языке Go и использует следующие библиотеки:

- `github.com/prometheus/client_golang/prometheus`: для сбора и публикации метрик Prometheus
- `github.com/prometheus/client_golang/prometheus/promauto`: для автоматического создания метрик Prometheus
- `github.com/prometheus/client_golang/prometheus/promhttp`: для публикации метрик Prometheus через HTTP

## Функциональность

Сервис предоставляет следующие возможности:

1. **Генерация контента SMS-сообщений**: Сервис принимает запрос с текстом-подсказкой (prompt) и использует внешний AI-сервис для генерации соответствующего контента SMS-сообщения. Результат возвращается в формате JSON.

2. **Сбор метрик Prometheus**: Сервис публикует метрики Prometheus, включая общее количество запросов к AI-сервису, на порту 8082.

3. **Логирование**: Сервис ведет логи в файл `ai_sms_service.log` и выводит их также в консоль.

## Использование

1. Установите необходимые зависимости:
   ```
   go get -u github.com/prometheus/client_golang/prometheus
   go get -u github.com/prometheus/client_golang/prometheus/promauto
   go get -u github.com/prometheus/client_golang/prometheus/promhttp
   ```

2. Запустите сервис:
   ```
   go run main.go setup.go
   ```

3. Сервис будет доступен по адресу `http://localhost:8080`. Вы можете отправить запрос на генерацию контента SMS-сообщения, используя параметр `prompt` в URL-адресе, например:
   ```
   http://localhost:8080/getAiSmsContent?prompt=Напишите короткое поздравление с Новым годом
   ```

4. Метрики Prometheus будут доступны по адресу `http://localhost:8082/metrics`.

## Конфигурация

Сервис использует следующие переменные окружения:

- `HTTP_PROXY` и `HTTPS_PROXY`: Если эти переменные установлены, сервис будет использовать указанный прокси-сервер для вызова внешнего AI-сервиса.

## Дальнейшее развитие

Возможные направления развития проекта:

- Добавление возможности настройки параметров вызова AI-сервиса (например, температура, топ-k, топ-p и т.д.).
- Интеграция с другими AI-сервисами, помимо Replicate.
- Улучшение обработки ошибок и логирования.
- Добавление возможности сохранения истории запросов и ответов.
- Разработка пользовательского интерфейса для взаимодействия с сервисом.



